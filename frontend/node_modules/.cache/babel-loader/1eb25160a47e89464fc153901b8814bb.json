{"ast":null,"code":"import _toConsumableArray from\"C:/Users/ASUS/Desktop/WebProject/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/ASUS/Desktop/WebProject/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Row,Col}from\"react-bootstrap\";import ApiService from\"../../ApiService\";import axios from\"axios\";import ItemReviewUserInfo from\"./ItemReviewUserInfo\";import Rating from\"@mui/material/Rating\";import FavoriteIcon from\"@mui/icons-material/Favorite\";import FavoriteBorderIcon from\"@mui/icons-material/FavoriteBorder\";import{styled}from\"@mui/material/styles\";import DeleteForeverOutlinedIcon from\"@mui/icons-material/DeleteForeverOutlined\";import UpdateOutlinedIcon from\"@mui/icons-material/UpdateOutlined\";import SendRoundedIcon from\"@mui/icons-material/SendRounded\";import{Button,CardActionArea,CardActions,Grid,Card,CardContent,CardMedia,Typography}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledRating=styled(Rating)({\"& .MuiRating-iconFilled\":{color:\"#ff3d47\"},\"& .MuiRating-iconHover\":{color:\"#ff6d75\"}});export default function ItemReview(props,_ref){var isAuthenticated=_ref.isAuthenticated;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),itemReview=_useState2[0],setItemReview=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isUpdateComment=_useState4[0],setIsUpdateComment=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),commentId=_useState6[0],setCommentId=_useState6[1];var _useState7=useState(props.itemId),_useState8=_slicedToArray(_useState7,1),itemID=_useState8[0];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),userID=_useState10[0],setUserID=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),rating=_useState12[0],setRating=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),comment=_useState14[0],setComment=_useState14[1];useEffect(function(){fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/gk/review/\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"access\")),Accept:\"application/json\"}}).then(function(resp){return resp.json();}).then(function(resp){return setItemReview(resp);}).catch(function(error){return console.log(error);});},[props.itemId]);var config={headers:{\"Content-Type\":\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"access\")),Accept:\"application/json\"}};useEffect(function(){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/me/\"),config).then(function(res){return setUserID(res.data.id);}).catch(function(error){return console.log(error);});},[props.itemId]);var insertComment=function insertComment(){ApiService.InsertComment(userID,itemID,rating,comment).then(function(resp){return setItemReview.apply(void 0,_toConsumableArray(itemReview).concat([resp.data]));}).then(window.location.reload(false)).then(setRating(0)).then(setComment(\"\"));};var deleteComment=function deleteComment(sr){var new_sr=itemReview.filter(function(my_sr){if(my_sr.id===sr.id){return false;}return true;});setItemReview(new_sr);};var deleteBtn=function deleteBtn(sr){ApiService.DeleteComment(sr.id).then(function(){return deleteComment(sr);}).catch(function(error){return console.log(error);});};var updateBtn=function updateBtn(sr){setIsUpdateComment(true);setComment(sr.comment);setRating(sr.rating);setCommentId(sr.id);};var updatedComment=function updatedComment(sr){var new_sr=itemReview.map(function(my_sr){if(my_sr.id===sr.id){return sr;}else{return my_sr;}});setItemReview(new_sr);};var userCommentUpdate=function userCommentUpdate(){if(!comment){return alert(\"Please write something to update the comment.\");}else{return ApiService.UpdateComment(commentId,userID,itemID,rating,comment).then(function(resp){return updatedComment(resp.data);}).then(setIsUpdateComment(false)).then(setComment(\"\")).then(setRating(0)).catch(function(error){return console.log(error);});}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:2}),/*#__PURE__*/_jsxs(Col,{sm:true,className:\" p-2\"// style={{\n//   background: \"#FFBD2D\",\n// }}\n,children:[itemReview.filter(function(sd){return sd.itemID===props.itemId;}).map(function(sr){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{className:\"shadow rounded-3 text-white p-3\",style:{background:\"#dc3545\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[sr.userID?/*#__PURE__*/_jsx(ItemReviewUserInfo,{user:sr}):null,/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:sr.comment}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time: \"}),\" \",sr.timeStampUpdated[11],sr.timeStampUpdated[12],sr.timeStampUpdated[13],sr.timeStampUpdated[14],sr.timeStampUpdated[15],\" \",/*#__PURE__*/_jsx(\"strong\",{children:\" Date:\"}),\" \",sr.timeStampUpdated[8],sr.timeStampUpdated[9],sr.timeStampUpdated[7],sr.timeStampUpdated[5],sr.timeStampUpdated[6],sr.timeStampUpdated[4],sr.timeStampUpdated[0],sr.timeStampUpdated[1],sr.timeStampUpdated[2],sr.timeStampUpdated[3]]}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"br\",{}),sr.userID===userID?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"large\",color:\"error\",startIcon:/*#__PURE__*/_jsx(UpdateOutlinedIcon,{}),className:\"btn btn-danger mx-auto\",onClick:function onClick(){return updateBtn(sr);},style:{background:\"#FFBD2D\"},children:\"Update\"}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"large\",color:\"error\",startIcon:/*#__PURE__*/_jsx(DeleteForeverOutlinedIcon,{}),onClick:function onClick(){return deleteBtn(sr);},className:\"btn btn-danger mx-auto\",style:{background:\"#FFBD2D\"},children:\"Delete\"})]}):null]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]},sr.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-lg rounded-3 text-white p-3 my-2\",style:{width:\"100%\",background:\"#FFBD2D\"},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold fs-2 mx-2\",children:[\"Select Rating:\",\" \",/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(StyledRating,{onChange:function onChange(_,value){setRating(value);},size:\"large\",value:rating,getLabelText:function getLabelText(value){return\"\".concat(value,\" Heart\").concat(value!==1?\"x\":\"\");},icon:/*#__PURE__*/_jsx(FavoriteIcon,{fontSize:\"inherit\"}),emptyIcon:/*#__PURE__*/_jsx(FavoriteBorderIcon,{fontSize:\"inherit\"})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",rows:\"5\",placeholder:\"Write Comment\",style:{width:\"100%\"},value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),isUpdateComment?/*#__PURE__*/_jsx(\"div\",{class:\"col text-center text-white \",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"large\",color:\"error\",startIcon:/*#__PURE__*/_jsx(UpdateOutlinedIcon,{}),onClick:userCommentUpdate,className:\"btn btn-lg text-white fs-4 fw-bold\",style:{width:\"100%\",background:\"#dc3545\"},children:\"Update\"})}):/*#__PURE__*/_jsx(\"div\",{class:\"text-center text-white\",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"large\",color:\"error\",endIcon:/*#__PURE__*/_jsx(SendRoundedIcon,{}),onClick:insertComment,className:\"btn btn-lg text-white fs-4 fw-bold\",style:{width:\"100%\",background:\"#dc3545\"},children:\"Post\"})})]})]}),/*#__PURE__*/_jsx(Col,{sm:2})]})});}","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/WebProject/frontend/src/containers/Item/ItemReview.js"],"names":["React","useState","useEffect","Row","Col","ApiService","axios","ItemReviewUserInfo","Rating","FavoriteIcon","FavoriteBorderIcon","styled","DeleteForeverOutlinedIcon","UpdateOutlinedIcon","SendRoundedIcon","Button","CardActionArea","CardActions","Grid","Card","CardContent","CardMedia","Typography","StyledRating","color","ItemReview","props","isAuthenticated","itemReview","setItemReview","isUpdateComment","setIsUpdateComment","commentId","setCommentId","itemId","itemID","userID","setUserID","rating","setRating","comment","setComment","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","localStorage","getItem","Accept","then","resp","json","catch","error","console","log","config","get","res","data","id","insertComment","InsertComment","window","location","reload","deleteComment","sr","new_sr","filter","my_sr","deleteBtn","DeleteComment","updateBtn","updatedComment","map","userCommentUpdate","alert","UpdateComment","sd","background","timeStampUpdated","width","_","value","e","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\nimport ApiService from \"../../ApiService\";\r\nimport axios from \"axios\";\r\nimport ItemReviewUserInfo from \"./ItemReviewUserInfo\";\r\n\r\nimport Rating from \"@mui/material/Rating\";\r\nimport FavoriteIcon from \"@mui/icons-material/Favorite\";\r\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport DeleteForeverOutlinedIcon from \"@mui/icons-material/DeleteForeverOutlined\";\r\nimport UpdateOutlinedIcon from \"@mui/icons-material/UpdateOutlined\";\r\nimport SendRoundedIcon from \"@mui/icons-material/SendRounded\";\r\n\r\nimport {\r\n  Button,\r\n  CardActionArea,\r\n  CardActions,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Typography,\r\n} from \"@mui/material\";\r\n\r\nconst StyledRating = styled(Rating)({\r\n  \"& .MuiRating-iconFilled\": {\r\n    color: \"#ff3d47\",\r\n  },\r\n  \"& .MuiRating-iconHover\": {\r\n    color: \"#ff6d75\",\r\n  },\r\n});\r\n\r\nexport default function ItemReview(props, { isAuthenticated }) {\r\n  const [itemReview, setItemReview] = useState([]);\r\n\r\n  const [isUpdateComment, setIsUpdateComment] = useState(false);\r\n\r\n  const [commentId, setCommentId] = useState();\r\n  const [itemID] = useState(props.itemId);\r\n  const [userID, setUserID] = useState([]);\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.REACT_APP_API_URL}/gk/review/`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `JWT ${localStorage.getItem(\"access\")}`,\r\n        Accept: \"application/json\",\r\n      },\r\n    })\r\n      .then((resp) => resp.json())\r\n      .then((resp) => setItemReview(resp))\r\n      .catch((error) => console.log(error));\r\n  }, [props.itemId]);\r\n\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `JWT ${localStorage.getItem(\"access\")}`,\r\n      Accept: \"application/json\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${process.env.REACT_APP_API_URL}/auth/users/me/`, config)\r\n      .then((res) => setUserID(res.data.id))\r\n      .catch((error) => console.log(error));\r\n  }, [props.itemId]);\r\n\r\n  const insertComment = () => {\r\n    ApiService.InsertComment(userID, itemID, rating, comment)\r\n      .then((resp) => setItemReview(...itemReview, resp.data))\r\n      .then(window.location.reload(false))\r\n      .then(setRating(0))\r\n      .then(setComment(\"\"));\r\n  };\r\n\r\n  const deleteComment = (sr) => {\r\n    const new_sr = itemReview.filter((my_sr) => {\r\n      if (my_sr.id === sr.id) {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n\r\n    setItemReview(new_sr);\r\n  };\r\n\r\n  const deleteBtn = (sr) => {\r\n    ApiService.DeleteComment(sr.id)\r\n      .then(() => deleteComment(sr))\r\n\r\n      .catch((error) => console.log(error));\r\n  };\r\n\r\n  const updateBtn = (sr) => {\r\n    setIsUpdateComment(true);\r\n    setComment(sr.comment);\r\n    setRating(sr.rating);\r\n    setCommentId(sr.id);\r\n  };\r\n\r\n  const updatedComment = (sr) => {\r\n    const new_sr = itemReview.map((my_sr) => {\r\n      if (my_sr.id === sr.id) {\r\n        return sr;\r\n      } else {\r\n        return my_sr;\r\n      }\r\n    });\r\n\r\n    setItemReview(new_sr);\r\n  };\r\n\r\n  const userCommentUpdate = () => {\r\n    if (!comment) {\r\n      return alert(\"Please write something to update the comment.\");\r\n    } else {\r\n      return ApiService.UpdateComment(\r\n        commentId,\r\n        userID,\r\n        itemID,\r\n        rating,\r\n        comment\r\n      )\r\n        .then((resp) => updatedComment(resp.data))\r\n        .then(setIsUpdateComment(false))\r\n        .then(setComment(\"\"))\r\n        .then(setRating(0))\r\n        .catch((error) => console.log(error));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Row>\r\n        <Col sm={2}></Col>\r\n        <Col\r\n          sm\r\n          className=\" p-2\"\r\n          // style={{\r\n          //   background: \"#FFBD2D\",\r\n          // }}\r\n        >\r\n          {itemReview\r\n            .filter((sd) => sd.itemID === props.itemId)\r\n            .map((sr) => {\r\n              return (\r\n                <div key={sr.id}>\r\n                  <div>\r\n                    <Row\r\n                      className=\"shadow rounded-3 text-white p-3\"\r\n                      style={{\r\n                        background: \"#dc3545\",\r\n                      }}\r\n                    >\r\n                      <p>\r\n                        {sr.userID ? <ItemReviewUserInfo user={sr} /> : null}\r\n                        <h4 className=\"my-4\">{sr.comment}</h4>\r\n                        <span>\r\n                          <strong>Time: </strong> {sr.timeStampUpdated[11]}\r\n                          {sr.timeStampUpdated[12]}\r\n                          {sr.timeStampUpdated[13]}\r\n                          {sr.timeStampUpdated[14]}\r\n                          {sr.timeStampUpdated[15]} <strong> Date:</strong>{\" \"}\r\n                          {sr.timeStampUpdated[8]}\r\n                          {sr.timeStampUpdated[9]}\r\n                          {sr.timeStampUpdated[7]}\r\n                          {sr.timeStampUpdated[5]}\r\n                          {sr.timeStampUpdated[6]}\r\n                          {sr.timeStampUpdated[4]}\r\n                          {sr.timeStampUpdated[0]}\r\n                          {sr.timeStampUpdated[1]}\r\n                          {sr.timeStampUpdated[2]}\r\n                          {sr.timeStampUpdated[3]}\r\n                        </span>\r\n                        <br />\r\n                      </p>\r\n\r\n                      <br />\r\n                      {sr.userID === userID ? (\r\n                        <div>\r\n                          <Button\r\n                            variant=\"outlined\"\r\n                            size=\"large\"\r\n                            color=\"error\"\r\n                            startIcon={<UpdateOutlinedIcon />}\r\n                            className=\"btn btn-danger mx-auto\"\r\n                            onClick={() => updateBtn(sr)}\r\n                            style={{\r\n                              background: \"#FFBD2D\",\r\n                            }}\r\n                          >\r\n                            Update\r\n                          </Button>{\" \"}\r\n                          <Button\r\n                            variant=\"outlined\"\r\n                            size=\"large\"\r\n                            color=\"error\"\r\n                            startIcon={<DeleteForeverOutlinedIcon />}\r\n                            onClick={() => deleteBtn(sr)}\r\n                            className=\"btn btn-danger mx-auto\"\r\n                            style={{\r\n                              background: \"#FFBD2D\",\r\n                            }}\r\n                          >\r\n                            Delete\r\n                          </Button>\r\n                        </div>\r\n                      ) : null}\r\n                    </Row>\r\n                  </div>\r\n                  <Row>\r\n                    <br />\r\n                    <br />\r\n                  </Row>\r\n                </div>\r\n              );\r\n            })}\r\n\r\n          <div\r\n            className=\"shadow-lg rounded-3 text-white p-3 my-2\"\r\n            style={{\r\n              width: \"100%\",\r\n              background: \"#FFBD2D\",\r\n            }}\r\n          >\r\n            <span className=\"fw-bold fs-2 mx-2\">\r\n              Select Rating:{\" \"}\r\n              <span>\r\n                <StyledRating\r\n                  onChange={(_, value) => {\r\n                    setRating(value);\r\n                  }}\r\n                  size=\"large\"\r\n                  value={rating}\r\n                  getLabelText={(value) =>\r\n                    `${value} Heart${value !== 1 ? \"x\" : \"\"}`\r\n                  }\r\n                  icon={<FavoriteIcon fontSize=\"inherit\" />}\r\n                  emptyIcon={<FavoriteBorderIcon fontSize=\"inherit\" />}\r\n                />\r\n              </span>\r\n            </span>\r\n            <br />\r\n            <br />\r\n            <textarea\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              rows=\"5\"\r\n              placeholder=\"Write Comment\"\r\n              style={{\r\n                width: \"100%\",\r\n              }}\r\n              value={comment}\r\n              onChange={(e) => setComment(e.target.value)}\r\n            />\r\n\r\n            <br />\r\n            {isUpdateComment ? (\r\n              <div class=\"col text-center text-white \">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  size=\"large\"\r\n                  color=\"error\"\r\n                  startIcon={<UpdateOutlinedIcon />}\r\n                  onClick={userCommentUpdate}\r\n                  className=\"btn btn-lg text-white fs-4 fw-bold\"\r\n                  style={{\r\n                    width: \"100%\",\r\n                    background: \"#dc3545\",\r\n                  }}\r\n                >\r\n                  Update\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <div class=\"text-center text-white\">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  size=\"large\"\r\n                  color=\"error\"\r\n                  endIcon={<SendRoundedIcon />}\r\n                  onClick={insertComment}\r\n                  className=\"btn btn-lg text-white fs-4 fw-bold\"\r\n                  style={{\r\n                    width: \"100%\",\r\n                    background: \"#dc3545\",\r\n                  }}\r\n                >\r\n                  Post\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Col>\r\n        <Col sm={2}></Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}