{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/ASUS/Desktop/WebProject/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\WebProject\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{LOGIN_SUCCESS,LOGIN_FAIL,USER_LOADED_SUCCESS,USER_LOADED_FAIL,AUTHENTICATED_SUCCESS,AUTHENTICATED_FAIL,PASSWORD_RESET_SUCCESS,PASSWORD_RESET_FAIL,PASSWORD_RESET_CONFIRM_SUCCESS,PASSWORD_RESET_CONFIRM_FAIL,SIGNUP_SUCCESS,SIGNUP_FAIL,ACTIVATION_SUCCESS,ACTIVATION_FAIL,GOOGLE_AUTH_SUCCESS,GOOGLE_AUTH_FAIL,FACEBOOK_AUTH_SUCCESS,FACEBOOK_AUTH_FAIL,LOGOUT}from\"./types\";export var load_user=function load_user(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem(\"access\")){_context.next=14;break;}config={headers:{\"Content-Type\":\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"access\")),Accept:\"application/json\"}};_context.prev=2;_context.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/me/\"),config);case 5:res=_context.sent;dispatch({type:USER_LOADED_SUCCESS,payload:res.data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:USER_LOADED_FAIL});case 12:_context.next=15;break;case 14:dispatch({type:USER_LOADED_FAIL});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var googleAuthenticate=function googleAuthenticate(state,code){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,details,formBody,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(state&&code&&!localStorage.getItem(\"access\"))){_context2.next=15;break;}config={headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}};details={state:state,code:code};formBody=Object.keys(details).map(function(key){return encodeURIComponent(key)+\"=\"+encodeURIComponent(details[key]);}).join(\"&\");_context2.prev=4;_context2.next=7;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/o/google-oauth2/?\").concat(formBody),config);case 7:res=_context2.sent;dispatch({type:GOOGLE_AUTH_SUCCESS,payload:res.data});dispatch(load_user());_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](4);dispatch({type:GOOGLE_AUTH_FAIL});case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[4,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var facebookAuthenticate=function facebookAuthenticate(state,code){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,details,formBody,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(state&&code&&!localStorage.getItem(\"access\"))){_context3.next=15;break;}config={headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}};details={state:state,code:code};formBody=Object.keys(details).map(function(key){return encodeURIComponent(key)+\"=\"+encodeURIComponent(details[key]);}).join(\"&\");_context3.prev=4;_context3.next=7;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/o/facebook/?\").concat(formBody),config);case 7:res=_context3.sent;dispatch({type:FACEBOOK_AUTH_SUCCESS,payload:res.data});dispatch(load_user());_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](4);dispatch({type:FACEBOOK_AUTH_FAIL});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[4,12]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var checkAuthenticated=function checkAuthenticated(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!localStorage.getItem(\"access\")){_context4.next=15;break;}config={headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}};body=JSON.stringify({token:localStorage.getItem(\"access\")});_context4.prev=3;_context4.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/verify/\"),body,config);case 6:res=_context4.sent;if(res.data.code!==\"token_not_valid\"){dispatch({type:AUTHENTICATED_SUCCESS});}else{dispatch({type:AUTHENTICATED_FAIL});}_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](3);dispatch({type:AUTHENTICATED_FAIL});case 13:_context4.next=16;break;case 15:dispatch({type:AUTHENTICATED_FAIL});case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[3,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var login=function login(email,password){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({email:email,password:password});_context5.prev=2;_context5.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/create/\"),body,config);case 5:res=_context5.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(load_user());_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](2);dispatch({type:LOGIN_FAIL});case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[2,10]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var signup=function signup(first_name,last_name,email,house_name,road_no,block_no,area,city,district,mobilePhone,// profile_picture,\nis_worker,password,re_password){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({first_name:first_name,last_name:last_name,email:email,house_name:house_name,road_no:road_no,block_no:block_no,area:area,city:city,district:district,mobilePhone:mobilePhone,// profile_picture,\nis_worker:is_worker,password:password,re_password:re_password});_context6.prev=2;_context6.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/\"),body,config);case 5:res=_context6.sent;dispatch({type:SIGNUP_SUCCESS,payload:res.data});_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](2);dispatch({type:SIGNUP_FAIL});case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[2,9]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var verify=function verify(uid,token){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({uid:uid,token:token});_context7.prev=2;_context7.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/activation/\"),body,config);case 5:dispatch({type:ACTIVATION_SUCCESS});_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](2);dispatch({type:ACTIVATION_FAIL});case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[2,8]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var reset_password=function reset_password(email){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({email:email});_context8.prev=2;_context8.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/reset_password/\"),body,config);case 5:dispatch({type:PASSWORD_RESET_SUCCESS});_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](2);dispatch({type:PASSWORD_RESET_FAIL});case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[2,8]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};export var reset_password_confirm=function reset_password_confirm(uid,token,new_password,re_new_password){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({uid:uid,token:token,new_password:new_password,re_new_password:re_new_password});_context9.prev=2;_context9.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/reset_password_confirm/\"),body,config);case 5:dispatch({type:PASSWORD_RESET_CONFIRM_SUCCESS});_context9.next=11;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](2);dispatch({type:PASSWORD_RESET_CONFIRM_FAIL});case 11:case\"end\":return _context9.stop();}}},_callee9,null,[[2,8]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){dispatch({type:LOGOUT});};};","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/WebProject/frontend/src/redux/actions/auth.js"],"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","USER_LOADED_SUCCESS","USER_LOADED_FAIL","AUTHENTICATED_SUCCESS","AUTHENTICATED_FAIL","PASSWORD_RESET_SUCCESS","PASSWORD_RESET_FAIL","PASSWORD_RESET_CONFIRM_SUCCESS","PASSWORD_RESET_CONFIRM_FAIL","SIGNUP_SUCCESS","SIGNUP_FAIL","ACTIVATION_SUCCESS","ACTIVATION_FAIL","GOOGLE_AUTH_SUCCESS","GOOGLE_AUTH_FAIL","FACEBOOK_AUTH_SUCCESS","FACEBOOK_AUTH_FAIL","LOGOUT","load_user","dispatch","localStorage","getItem","config","headers","Authorization","Accept","get","process","env","REACT_APP_API_URL","res","type","payload","data","googleAuthenticate","state","code","details","formBody","Object","keys","map","key","encodeURIComponent","join","post","facebookAuthenticate","checkAuthenticated","body","JSON","stringify","token","login","email","password","signup","first_name","last_name","house_name","road_no","block_no","area","city","district","mobilePhone","is_worker","re_password","verify","uid","reset_password","reset_password_confirm","new_password","re_new_password","logout"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  USER_LOADED_SUCCESS,\r\n  USER_LOADED_FAIL,\r\n  AUTHENTICATED_SUCCESS,\r\n  AUTHENTICATED_FAIL,\r\n  PASSWORD_RESET_SUCCESS,\r\n  PASSWORD_RESET_FAIL,\r\n  PASSWORD_RESET_CONFIRM_SUCCESS,\r\n  PASSWORD_RESET_CONFIRM_FAIL,\r\n  SIGNUP_SUCCESS,\r\n  SIGNUP_FAIL,\r\n  ACTIVATION_SUCCESS,\r\n  ACTIVATION_FAIL,\r\n  GOOGLE_AUTH_SUCCESS,\r\n  GOOGLE_AUTH_FAIL,\r\n  FACEBOOK_AUTH_SUCCESS,\r\n  FACEBOOK_AUTH_FAIL,\r\n  LOGOUT,\r\n} from \"./types\";\r\n\r\nexport const load_user = () => async (dispatch) => {\r\n  if (localStorage.getItem(\"access\")) {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `JWT ${localStorage.getItem(\"access\")}`,\r\n        Accept: \"application/json\",\r\n      },\r\n    };\r\n\r\n    try {\r\n      const res = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/auth/users/me/`,\r\n        config\r\n      );\r\n\r\n      dispatch({\r\n        type: USER_LOADED_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: USER_LOADED_FAIL,\r\n      });\r\n    }\r\n  } else {\r\n    dispatch({\r\n      type: USER_LOADED_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\nexport const googleAuthenticate = (state, code) => async (dispatch) => {\r\n  if (state && code && !localStorage.getItem(\"access\")) {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      },\r\n    };\r\n\r\n    const details = {\r\n      state: state,\r\n      code: code,\r\n    };\r\n\r\n    const formBody = Object.keys(details)\r\n      .map(\r\n        (key) =>\r\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])\r\n      )\r\n      .join(\"&\");\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/auth/o/google-oauth2/?${formBody}`,\r\n        config\r\n      );\r\n\r\n      dispatch({\r\n        type: GOOGLE_AUTH_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n\r\n      dispatch(load_user());\r\n    } catch (err) {\r\n      dispatch({\r\n        type: GOOGLE_AUTH_FAIL,\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nexport const facebookAuthenticate = (state, code) => async (dispatch) => {\r\n  if (state && code && !localStorage.getItem(\"access\")) {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      },\r\n    };\r\n\r\n    const details = {\r\n      state: state,\r\n      code: code,\r\n    };\r\n\r\n    const formBody = Object.keys(details)\r\n      .map(\r\n        (key) =>\r\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])\r\n      )\r\n      .join(\"&\");\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/auth/o/facebook/?${formBody}`,\r\n        config\r\n      );\r\n\r\n      dispatch({\r\n        type: FACEBOOK_AUTH_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n\r\n      dispatch(load_user());\r\n    } catch (err) {\r\n      dispatch({\r\n        type: FACEBOOK_AUTH_FAIL,\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nexport const checkAuthenticated = () => async (dispatch) => {\r\n  if (localStorage.getItem(\"access\")) {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n      },\r\n    };\r\n\r\n    const body = JSON.stringify({ token: localStorage.getItem(\"access\") });\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/auth/jwt/verify/`,\r\n        body,\r\n        config\r\n      );\r\n\r\n      if (res.data.code !== \"token_not_valid\") {\r\n        dispatch({\r\n          type: AUTHENTICATED_SUCCESS,\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: AUTHENTICATED_FAIL,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: AUTHENTICATED_FAIL,\r\n      });\r\n    }\r\n  } else {\r\n    dispatch({\r\n      type: AUTHENTICATED_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\nexport const login = (email, password) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const body = JSON.stringify({ email, password });\r\n\r\n  try {\r\n    const res = await axios.post(\r\n      `${process.env.REACT_APP_API_URL}/auth/jwt/create/`,\r\n      body,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n\r\n    dispatch(load_user());\r\n  } catch (err) {\r\n    dispatch({\r\n      type: LOGIN_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\nexport const signup =\r\n  (\r\n    first_name,\r\n    last_name,\r\n    email,\r\n    house_name,\r\n    road_no,\r\n    block_no,\r\n    area,\r\n    city,\r\n    district,\r\n    mobilePhone,\r\n    // profile_picture,\r\n    is_worker,\r\n    password,\r\n    re_password\r\n  ) =>\r\n  async (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n      first_name,\r\n      last_name,\r\n      email,\r\n      house_name,\r\n      road_no,\r\n      block_no,\r\n      area,\r\n      city,\r\n      district,\r\n      mobilePhone,\r\n      // profile_picture,\r\n      is_worker,\r\n      password,\r\n      re_password,\r\n    });\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/auth/users/`,\r\n        body,\r\n        config\r\n      );\r\n\r\n      dispatch({\r\n        type: SIGNUP_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: SIGNUP_FAIL,\r\n      });\r\n    }\r\n  };\r\n\r\nexport const verify = (uid, token) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const body = JSON.stringify({ uid, token });\r\n\r\n  try {\r\n    await axios.post(\r\n      `${process.env.REACT_APP_API_URL}/auth/users/activation/`,\r\n      body,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: ACTIVATION_SUCCESS,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: ACTIVATION_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\nexport const reset_password = (email) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const body = JSON.stringify({ email });\r\n\r\n  try {\r\n    await axios.post(\r\n      `${process.env.REACT_APP_API_URL}/auth/users/reset_password/`,\r\n      body,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: PASSWORD_RESET_SUCCESS,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PASSWORD_RESET_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\nexport const reset_password_confirm =\r\n  (uid, token, new_password, re_new_password) => async (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const body = JSON.stringify({ uid, token, new_password, re_new_password });\r\n\r\n    try {\r\n      await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/auth/users/reset_password_confirm/`,\r\n        body,\r\n        config\r\n      );\r\n\r\n      dispatch({\r\n        type: PASSWORD_RESET_CONFIRM_SUCCESS,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: PASSWORD_RESET_CONFIRM_FAIL,\r\n      });\r\n    }\r\n  };\r\n\r\nexport const logout = () => (dispatch) => {\r\n  dispatch({\r\n    type: LOGOUT,\r\n  });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}