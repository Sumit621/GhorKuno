{"ast":null,"code":"import _slicedToArray from\"C:/Users/ASUS/Desktop/WebProject/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Link,Navigate,useLocation,useNavigate}from\"react-router-dom\";import axios from\"axios\";import ResetPassword from\"../../containers/LogInAndSignUp/ResetPassword\";import{Form,Container,Row,Col,Button,Figure}from\"react-bootstrap\";import useFetchGet from\"../../hocs/useFetchGet\";import UserInfo from\"./UserInfo\";import UserInfoForm from\"./UserInfoForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserInfoIndex=function UserInfoIndex(_ref){var isAuthenticated=_ref.isAuthenticated;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),authUser=_useState2[0],setAuthUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userList=_useState4[0],setUserList=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),editUserInfo=_useState6[0],setEditUserInfo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isUpdateBtn=_useState8[0],setIsUpdateBtn=_useState8[1];// const [first_name, set_first_name] = useState(\"\");\n// const [last_name, set_last_name] = useState(\"\");\n// const [house_name , set_house_name ] = useState(\"\");\n// const [ road_no,set_road_no ] = useState(\"\");\n// const [ block_no,set_block_no ] = useState(\"\");\n// const [ area,set_area ] = useState(\"\");\n// const [ city,set_city ] = useState(\"\");\n// const [ district,set_district ] = useState(\"\");\n// const [ mobilePhone,set_mobilePhone ] = useState(\"\");\nvar _useState9=useState({first_name:\"\",last_name:\"\",house_name:\"\",road_no:\"\",block_no:\"\",area:\"\",city:\"\",district:\"\",mobilePhone:\"\"}),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var config={headers:{\"Content-Type\":\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"access\")),Accept:\"application/json\"}};useEffect(function(){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/me/\"),config).then(function(res){return setAuthUser(res.data);}).catch(function(error){return console.log(error);});},[isAuthenticated]);useEffect(function(){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/userInfo/\"),config).then(function(res){return setUserList(res.data);}).catch(function(error){return console.log(error);});},[]);var _userList$filter=userList.filter(function(userData){return userData.user_id===authUser.id;}),_userList$filter2=_slicedToArray(_userList$filter,1),user=_userList$filter2[0];console.table(user);var editBtn=function editBtn(new_user){setEditUserInfo(new_user);setIsUpdateBtn(true);};var updatedInformation=function updatedInformation(new_user){var new_userInfo=userList.map(function(new_){if(new_.user_id===new_user.id){return new_user;}else{return new_;}});setUserList(new_userInfo);setIsUpdateBtn(false);};var userInfoForm=function userInfoForm(){setEditUserInfo({first_name:\"\",last_name:\"\",house_name:\"\",road_no:\"\",block_no:\"\",area:\"\",city:\"\",district:\"\",mobilePhone:\"\"});};return/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:6,children:user?/*#__PURE__*/_jsx(UserInfo,{userInfo:user,editBtn:editBtn,userInfoForm:userInfoForm}):null}),/*#__PURE__*/_jsx(Col,{sm:6,children:isUpdateBtn?/*#__PURE__*/_jsx(UserInfoForm,{userInfo:editUserInfo,updatedInformation:updatedInformation,isUpdateBtn:isUpdateBtn}):null})]})});};export default UserInfoIndex;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/WebProject/frontend/src/components/Profile/UserInfoIndex.js"],"names":["React","useState","useEffect","Link","Navigate","useLocation","useNavigate","axios","ResetPassword","Form","Container","Row","Col","Button","Figure","useFetchGet","UserInfo","UserInfoForm","UserInfoIndex","isAuthenticated","navigate","authUser","setAuthUser","userList","setUserList","editUserInfo","setEditUserInfo","isUpdateBtn","setIsUpdateBtn","first_name","last_name","house_name","road_no","block_no","area","city","district","mobilePhone","formData","setFormData","config","headers","Authorization","localStorage","getItem","Accept","get","process","env","REACT_APP_API_URL","then","res","data","catch","error","console","log","filter","userData","user_id","id","user","table","editBtn","new_user","updatedInformation","new_userInfo","map","new_","userInfoForm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, Navigate, useLocation, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport ResetPassword from \"../../containers/LogInAndSignUp/ResetPassword\";\r\nimport { Form, Container, Row, Col, Button, Figure } from \"react-bootstrap\";\r\nimport useFetchGet from \"../../hocs/useFetchGet\";\r\n\r\nimport UserInfo from \"./UserInfo\";\r\nimport UserInfoForm from \"./UserInfoForm\";\r\n\r\nconst UserInfoIndex = ({ isAuthenticated }) => {\r\n  const navigate = useNavigate();\r\n  const [authUser, setAuthUser] = useState([]);\r\n  const [userList, setUserList] = useState([]);\r\n\r\n  const [editUserInfo, setEditUserInfo] = useState(null);\r\n  const [isUpdateBtn, setIsUpdateBtn] = useState(false);\r\n\r\n  // const [first_name, set_first_name] = useState(\"\");\r\n  // const [last_name, set_last_name] = useState(\"\");\r\n  // const [house_name , set_house_name ] = useState(\"\");\r\n  // const [ road_no,set_road_no ] = useState(\"\");\r\n  // const [ block_no,set_block_no ] = useState(\"\");\r\n  // const [ area,set_area ] = useState(\"\");\r\n  // const [ city,set_city ] = useState(\"\");\r\n  // const [ district,set_district ] = useState(\"\");\r\n  // const [ mobilePhone,set_mobilePhone ] = useState(\"\");\r\n\r\n  const [formData, setFormData] = useState({\r\n    first_name: \"\",\r\n    last_name: \"\",\r\n    house_name: \"\",\r\n    road_no: \"\",\r\n    block_no: \"\",\r\n    area: \"\",\r\n    city: \"\",\r\n    district: \"\",\r\n    mobilePhone: \"\",\r\n  });\r\n\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `JWT ${localStorage.getItem(\"access\")}`,\r\n      Accept: \"application/json\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${process.env.REACT_APP_API_URL}/auth/users/me/`, config)\r\n      .then((res) => setAuthUser(res.data))\r\n      .catch((error) => console.log(error));\r\n  }, [isAuthenticated]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${process.env.REACT_APP_API_URL}/accounts/userInfo/`, config)\r\n      .then((res) => setUserList(res.data))\r\n      .catch((error) => console.log(error));\r\n  }, []);\r\n\r\n  const [user] = userList.filter(\r\n    (userData) => userData.user_id === authUser.id\r\n  );\r\n  console.table(user);\r\n\r\n  const editBtn = (new_user) => {\r\n    setEditUserInfo(new_user);\r\n    setIsUpdateBtn(true);\r\n  };\r\n\r\n  const updatedInformation = (new_user) => {\r\n    const new_userInfo = userList.map((new_) => {\r\n      if (new_.user_id === new_user.id) {\r\n        return new_user;\r\n      } else {\r\n        return new_;\r\n      }\r\n    });\r\n    setUserList(new_userInfo);\r\n    setIsUpdateBtn(false);\r\n  };\r\n\r\n  const userInfoForm = () => {\r\n    setEditUserInfo({\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      house_name: \"\",\r\n      road_no: \"\",\r\n      block_no: \"\",\r\n      area: \"\",\r\n      city: \"\",\r\n      district: \"\",\r\n      mobilePhone: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row>\r\n        <Col sm={6}>\r\n          {user ? (\r\n            <UserInfo\r\n              userInfo={user}\r\n              editBtn={editBtn}\r\n              userInfoForm={userInfoForm}\r\n            />\r\n          ) : null}\r\n        </Col>\r\n        <Col sm={6}>\r\n          {isUpdateBtn ? (\r\n            <UserInfoForm\r\n              userInfo={editUserInfo}\r\n              updatedInformation={updatedInformation}\r\n              isUpdateBtn={isUpdateBtn}\r\n            />\r\n          ) : null}\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserInfoIndex;\r\n"]},"metadata":{},"sourceType":"module"}